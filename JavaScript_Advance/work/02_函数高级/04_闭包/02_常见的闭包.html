<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>02_常见的闭包</title>
</head>
<body>
    
    1. 将函数作为另一个函数的返回值
    2. 将函数作为实参传递给另一个函数调用

<script>
    // 1. 将函数作为另一个函数的返回值
    // function fn1() {
    //     var a = 2;
    //     function fn2() {
    //     };
    //     return fn2;
    // };
    // var f = fn1();      // 这样有没有产生闭包？ 没有，因为fn2没有引用外部变量

    
    function fn1() {
        var a = 2;
        function fn2() {    // 这样引用了外部变量才会有
            a++;
            console.log(a);
        };
        return fn2;
    };
    var f = fn1();

    f();    //  3
    f();    //  4

    // 问：上面的代码过程中，总共产生了几个闭包？
    // 答：1个，因为只产生了一个内部函数对象(fn2)：闭包是存在内部函数对象中的
    //      因为外部函数fn1 只调用了一次，所以，只产生了一个内部对象fn2
    //      f()这里表示的是调用，在执行内部函数，而不是创建
    //      如果，需要产生多个，要多次调用fn1
    // var fnn = fn1();
    // fnn();


    // ======================

    // 2. 将函数作为实参传递给另一个函数调用

    function showDelay(msg, time) {
        setTimeout(function () {
            // alert(msg); //  如果注释，就不会产生闭包
            alert(msg); //产生了闭包
        }, time);
    };
    showDelay('atguigu', 2000);
</script>
</body>
</html>